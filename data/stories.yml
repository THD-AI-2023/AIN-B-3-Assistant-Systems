version: "3.1"

stories:

  # -----------------------------
  # Short stories: Recommendations & Data Analysis
  # -----------------------------

  - story: User asks for recommendation and wants advice
    steps:
      - intent: ask_recommendation
      - action: action_generate_recommendation
      - slot_was_set:
        - risk_level: high
      - intent: affirm
      - action: action_provide_stroke_risk_reduction_advice

  - story: User asks for recommendation and declines advice
    steps:
      - intent: ask_recommendation
      - action: action_generate_recommendation
      - slot_was_set:
        - risk_level: high
      - intent: deny
      - action: utter_goodbye

  - story: User asks for recommendation with low risk
    steps:
      - intent: ask_recommendation
      - action: action_generate_recommendation
      # No risk_level slot is set, so no follow-up advice

  - story: User asks for data analysis
    steps:
      - intent: ask_data_analysis
      - action: action_show_data_analysis

  # -----------------------------
  # Sample introductions & chitchat
  # -----------------------------

  - story: Introduce name
    steps:
      - intent: introduce_name
      - action: action_save_name
      - action: utter_greet_with_name

  - story: Handle chitchat ask name
    steps:
      - intent: chitchat_ask_name
      - action: utter_chitchat_ask_name

  - story: Handle chitchat tell joke
    steps:
      - intent: chitchat_tell_joke
      - action: utter_chitchat_tell_joke

  - story: Handle chitchat favorite color
    steps:
      - intent: chitchat_favorite_color
      - action: utter_chitchat_favorite_color

  - story: Handle chitchat weather
    steps:
      - intent: chitchat_weather
      - action: utter_chitchat_weather

  - story: Out of scope query
    steps:
      - intent: out_of_scope
      - action: utter_out_of_scope

  - story: Fallback
    steps:
      - action: action_default_fallback

  - story: Greet and goodbye
    steps:
      - intent: greet
      - action: utter_greet
      - intent: goodbye
      - action: utter_goodbye

  # -----------------------------
  # Example: Inform + Recommendation
  # -----------------------------
  - story: User provides personal health info
    steps:
      - intent: inform
      - action: utter_greet  # Or any placeholder
      - intent: ask_recommendation
      - action: action_generate_recommendation

  # A quick story for user asking capabilities
  - story: User asks capabilities
    steps:
      - intent: ask_capabilities
      - action: utter_capabilities

  # -----------------------------
  # Full conversation (High Risk Scenario)
  # -----------------------------
  - story: Full conversation (High Risk Scenario)
    steps:
      - intent: greet
      - action: utter_greet
      - intent: introduce_name
      - action: action_save_name
      - action: utter_greet_with_name
      - intent: ask_data_analysis
      - action: action_show_data_analysis
      - intent: ask_recommendation
      - action: action_generate_recommendation
      - slot_was_set:
        - risk_level: high
      - intent: affirm
      - action: action_provide_stroke_risk_reduction_advice
      - intent: deny
      - action: utter_goodbye

  # -----------------------------
  # Full conversation (Low Risk Scenario)
  # -----------------------------
  - story: Full conversation (Low Risk Scenario)
    steps:
      - intent: greet
      - action: utter_greet
      - intent: introduce_name
      - action: action_save_name
      - action: utter_greet_with_name
      - intent: ask_data_analysis
      - action: action_show_data_analysis
      - intent: ask_recommendation
      - action: action_generate_recommendation
      # Suppose the model indicates low risk, so no risk_level slot is set
      - intent: goodbye
      - action: utter_goodbye
